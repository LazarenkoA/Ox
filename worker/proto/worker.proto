syntax = "proto3";

option go_package = "./gen";

service Worker {
  rpc SetTestScript(SetTestScriptReq) returns(Empty) {}
  rpc Start(StartResp) returns(Empty) {}
  rpc Stop(Empty) returns(Empty) {}
  rpc ObserverChangeState(Empty) returns(stream StatusInfo) {}
}

message StatusInfo {
  WorkerStatus status = 4;
}

message StartResp {
  int32 test_count = 4;
}

message SetTestScriptReq {
  string script = 1;
}

message Empty {
}

enum WorkerStatus {
  STATE_UNSPECIFIED = 0;
  STATE_READY = 1;
  STATE_RUNNING = 2;
  STATE_ERROR = 3;
}

